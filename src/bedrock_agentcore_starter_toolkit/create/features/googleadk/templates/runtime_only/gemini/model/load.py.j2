import os
from bedrock_agentcore.identity.auth import requires_api_key
from dotenv import load_dotenv

@requires_api_key(provider_name=os.getenv("BEDROCK_AGENTCORE_MODEL_PROVIDER_API_KEY_NAME", ""))
def agentcore_identity_api_key_provider(api_key: str) -> str:
    return api_key

def load_model() -> None:
    if os.getenv("LOCAL_DEV") == "1":
        load_dotenv()
        api_key = os.getenv("GEMINI_API_KEY")
    else:
        api_key = agentcore_identity_api_key_provider()

    # Use Google AI Studios API Key Authentication.
    # https://google.github.io/adk-docs/agents/models/#google-ai-studio
    os.environ["GOOGLE_API_KEY"] = api_key
    os.environ["GOOGLE_GENAI_USE_VERTEXAI"]="FALSE"
