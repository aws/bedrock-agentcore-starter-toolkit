
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
      <meta name="description" content="Documentation for Amazon Bedrock AgentCore, primitives for building and running AI agents">
    
    
    
      <link rel="canonical" href="https://aws.github.io/bedrock-agentcore-starter-toolkit/examples/infrastructure-as-code/terraform/mcp-server-agentcore-runtime/mcp-server-terraform-deploy-readme.html">
    
    
    
    
    <link rel="icon" href="../../../.." sizes="any">
    <link rel="icon" href="../../../../assets/images/favicon.png" type="image/svg+xml">
    <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">

    
      
        <title>Mcp server terraform deploy readme - Amazon Bedrock AgentCore</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#table-of-contents" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Amazon Bedrock AgentCore" class="md-header__button md-logo" aria-label="Amazon Bedrock AgentCore" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Amazon Bedrock AgentCore
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mcp server terraform deploy readme
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/aws/bedrock-agentcore-starter-toolkit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../index.html" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../index.html" class="md-tabs__link">
          
  
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://github.com/aws/bedrock-agentcore-sdk-python/blob/main/CONTRIBUTING.md" class="md-tabs__link">
        
  
  
    
  
  Contribute ‚ù§Ô∏è

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../api-reference/runtime.html" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Amazon Bedrock AgentCore" class="md-nav__button md-logo" aria-label="Amazon Bedrock AgentCore" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Amazon Bedrock AgentCore
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aws/bedrock-agentcore-starter-toolkit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/create/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Create Agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/dev/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Local Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Runtime
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Runtime
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/runtime/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runtime Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/runtime/overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runtime Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/runtime/permissions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runtime Permissions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/runtime/async.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runtime Async Processing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/runtime/notebook.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runtime Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/runtime/a2a.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runtime A2A Server Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Gateway
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Gateway
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/gateway/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gateway Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Memory
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Memory
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/memory/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Policy
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Policy
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/policy/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policy Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/policy/overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policy Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Identity
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Identity
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/identity/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Identity Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/identity/quickstart-with-cli.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Identity CLI Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" >
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Built-in Tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Built-in Tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/builtin-tools/quickstart-browser.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart Browser Tool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/builtin-tools/quickstart-code-interpreter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart Code Interpreter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" >
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/security/vpc-interface-endpoints.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VPC Interface Endpoints
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/security/agentcore-vpc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AgentCore VPC Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/security/security-vpc-condition.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VPC Condition Keys
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_11" >
        
          
          <label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Observability
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/observability/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Observability Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_12" >
        
          
          <label class="md-nav__link" for="__nav_1_12" id="__nav_1_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Evaluation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/evaluation/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_13" >
        
          
          <label class="md-nav__link" for="__nav_1_13" id="__nav_1_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Import Agent
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    Import Agent
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/import-agent/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Import Agent Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/import-agent/overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Import Agent Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../user-guide/import-agent/configuration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Import Agent Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../agentcore-quickstart-example.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runtime Transform and Deploy Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../session-management.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Session Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../async-processing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Async Processing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../gateway-integration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gateway Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../policy-integration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policy Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../memory_gateway_agent.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Gateway Agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../runtime-framework-agents.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runtime Framework Agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../semantic_search.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Semantic Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/aws/bedrock-agentcore-sdk-python/blob/main/CONTRIBUTING.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contribute ‚ù§Ô∏è
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Bedrock AgentCore SDK
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Bedrock AgentCore SDK
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api-reference/runtime.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runtime
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api-reference/identity.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Identity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api-reference/memory.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api-reference/tools.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Built-in Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Bedrock AgentCore Starter Toolkit
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Bedrock AgentCore Starter Toolkit
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api-reference/cli.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AgentCore CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tutorial-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tutorial Details
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-included" class="md-nav__link">
    <span class="md-ellipsis">
      
        What's Included
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What&#39;s Included">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mcp-server-code-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        MCP Server Code Management
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        Required Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-account-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        AWS Account Requirements
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-configure-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Configure Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-initialize-terraform" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Initialize Terraform
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-review-the-plan" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Review the Plan
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-deploy" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Deploy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-get-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Get Outputs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication Model
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing the MCP Server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing the MCP Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites-for-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites for Testing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1-get-authentication-token" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Get Authentication Token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-test-the-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Test the MCP Server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expected-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Expected Output
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample-tool-invocations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sample Tool Invocations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Customization
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modify-mcp-server-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modify MCP Server Code
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modify-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modify Authentication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network Mode
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Structure
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codebuild-fails" class="md-nav__link">
    <span class="md-ellipsis">
      
        CodeBuild Fails
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime-creation-fails" class="md-nav__link">
    <span class="md-ellipsis">
      
        Runtime Creation Fails
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mcp-server-connection-fails" class="md-nav__link">
    <span class="md-ellipsis">
      
        MCP Server Connection Fails
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cleanup
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cleanup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#destroy-all-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Destroy All Resources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify Cleanup
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pricing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pricing
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Next Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explore-more-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Explore More Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extend-this-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extend This Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learn-more-about-mcp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Learn More About MCP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resources
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      
        ü§ù Contributing
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìÑ License
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Mcp server terraform deploy readme</h1>

<p>MCP Server on AgentCore Runtime - Terraform</p>
<p>This pattern demonstrates deploying an MCP (Model Context Protocol) server on Amazon Bedrock AgentCore Runtime using Terraform. It creates an MCP server with JWT authentication and three custom tools.</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#testing-the-mcp-server">Testing the MCP Server</a></li>
<li><a href="#sample-tool-invocations">Sample Tool Invocations</a></li>
<li><a href="#customization">Customization</a></li>
<li><a href="#file-structure">File Structure</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#cleanup">Cleanup</a></li>
<li><a href="#pricing">Pricing</a></li>
<li><a href="#next-steps">Next Steps</a></li>
<li><a href="#resources">Resources</a></li>
<li><a href="#-contributing">ü§ù Contributing</a></li>
<li><a href="#-license">üìÑ License</a></li>
</ul>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This Terraform configuration creates an MCP server deployment that includes:</p>
<ul>
<li><strong>MCP Server</strong>: Hosts three custom tools (add_numbers, multiply_numbers, greet_user)</li>
<li><strong>JWT Authentication</strong>: Cognito User Pool for secure access</li>
<li><strong>AgentCore Runtime</strong>: Serverless hosting with MCP protocol support</li>
<li><strong>ECR Repository</strong>: Stores the Docker container image</li>
<li><strong>CodeBuild Project</strong>: Automatically builds the ARM64 Docker image</li>
</ul>
<p>The stack uses the Amazon Bedrock AgentCore Python SDK to wrap agent functions as an MCP server compatible with Amazon Bedrock AgentCore. When hosting tools, the SDK implements the <a href="https://modelcontextprotocol.io/specification/2025-06-18/basic/transports">Stateless Streamable HTTP</a> transport protocol with the <code>MCP-Session-Id</code> header for session isolation.</p>
<p>This makes it ideal for:
- Learning MCP protocol with AgentCore Runtime
- Building secure MCP servers with JWT authentication
- Understanding MCP tool development patterns
- Creating custom tools for AI agents</p>
<h3 id="tutorial-details">Tutorial Details<a class="headerlink" href="#tutorial-details" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Information</th>
<th style="text-align: left;">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Tutorial type</td>
<td style="text-align: left;">Hosting Tools</td>
</tr>
<tr>
<td style="text-align: left;">Tool type</td>
<td style="text-align: left;">MCP server</td>
</tr>
<tr>
<td style="text-align: left;">Tutorial components</td>
<td style="text-align: left;">Terraform, AgentCore Runtime, MCP server, Cognito</td>
</tr>
<tr>
<td style="text-align: left;">Tutorial vertical</td>
<td style="text-align: left;">Cross-vertical</td>
</tr>
<tr>
<td style="text-align: left;">Example complexity</td>
<td style="text-align: left;">Intermediate</td>
</tr>
<tr>
<td style="text-align: left;">SDK used</td>
<td style="text-align: left;">Amazon BedrockAgentCore Python SDK and MCP Client</td>
</tr>
</tbody>
</table>
<h2 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h2>
<p><img alt="Architecture Diagram" src="../../../../../https:/raw.githubusercontent.com/awslabs/amazon-bedrock-agentcore-samples/refs/heads/main/04-infrastructure-as-code/terraform/mcp-server-agentcore-runtime/architecture.png" /></p>
<p>The architecture consists of:</p>
<ul>
<li><strong>User/MCP Client</strong>: Sends requests to the MCP server with JWT authentication</li>
<li><strong>Amazon Cognito</strong>: Provides JWT-based authentication</li>
<li>User Pool with pre-created test user (testuser/MyPassword123!)</li>
<li>User Pool Client for application access</li>
<li><strong>AWS CodeBuild</strong>: Builds the ARM64 Docker container image with the MCP server</li>
<li><strong>Amazon ECR Repository</strong>: Stores the container image</li>
<li><strong>AgentCore Runtime</strong>: Hosts the MCP Server</li>
<li><strong>MCP Server</strong>: Exposes three tools via HTTP transport on port 8000<ul>
<li><code>add_numbers</code>: Adds two numbers</li>
<li><code>multiply_numbers</code>: Multiplies two numbers</li>
<li><code>greet_user</code>: Greets a user by name</li>
</ul>
</li>
<li>Validates JWT tokens from Cognito</li>
<li>Processes MCP tool invocations</li>
<li><strong>IAM Roles</strong>: </li>
<li>IAM role for CodeBuild (builds and pushes images)</li>
<li>IAM role for AgentCore Runtime (runtime permissions)</li>
</ul>
<h2 id="whats-included">What's Included<a class="headerlink" href="#whats-included" title="Permanent link">&para;</a></h2>
<p>This Terraform configuration creates:</p>
<ul>
<li><strong>S3 Bucket</strong>: Stores MCP server source code for version-controlled builds</li>
<li><strong>ECR Repository</strong>: Container registry for the MCP server Docker image</li>
<li><strong>CodeBuild Project</strong>: Automated Docker image building and pushing</li>
<li><strong>Cognito User Pool</strong>: JWT authentication with pre-configured test user</li>
<li><strong>Cognito User Pool Client</strong>: Application client for authentication</li>
<li><strong>IAM Roles</strong>: Execution roles for AgentCore, CodeBuild, and Cognito operations</li>
<li><strong>AgentCore Runtime</strong>: Serverless MCP server runtime with JWT validation</li>
</ul>
<h3 id="mcp-server-code-management">MCP Server Code Management<a class="headerlink" href="#mcp-server-code-management" title="Permanent link">&para;</a></h3>
<p>The <code>mcp-server-code/</code> directory contains your MCP server's source files:
- <code>mcp_server.py</code> - MCP server implementation with three tools
- <code>Dockerfile</code> - Container configuration
- <code>requirements.txt</code> - Python dependencies (mcp&gt;=1.10.0, boto3, bedrock-agentcore)</p>
<p><strong>Automatic Change Detection</strong>: 
- Terraform archives the <code>mcp-server-code/</code> directory
- Uploads to S3 with MD5-based versioning
- CodeBuild pulls from S3 and builds the Docker image
- Any changes to files trigger automatic rebuild (new files, modifications, deletions)</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<h3 id="required-tools">Required Tools<a class="headerlink" href="#required-tools" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Terraform</strong> (&gt;= 1.6)</li>
<li><strong>Recommended</strong>: <a href="https://github.com/tfutils/tfenv">tfenv</a> for version management</li>
<li><strong>Or download directly</strong>: <a href="https://www.terraform.io/downloads">terraform.io/downloads</a></li>
</ol>
<p><strong>Note</strong>: <code>brew install terraform</code> provides v1.5.7 (deprecated). Use tfenv or direct download for &gt;= 1.6.</p>
<ol>
<li>
<p><strong>AWS CLI</strong> (configured with credentials)
   <div class="highlight"><pre><span></span><code>aws<span class="w"> </span>configure
</code></pre></div></p>
</li>
<li>
<p><strong>Python 3.11+</strong> (for testing scripts)
   <div class="highlight"><pre><span></span><code>python<span class="w"> </span>--version<span class="w">  </span><span class="c1"># Verify Python 3.11 or later</span>
pip<span class="w"> </span>install<span class="w"> </span>boto3<span class="w"> </span>mcp
</code></pre></div></p>
</li>
<li>
<p><strong>Docker</strong> (for local testing, optional)</p>
</li>
</ol>
<h3 id="aws-account-requirements">AWS Account Requirements<a class="headerlink" href="#aws-account-requirements" title="Permanent link">&para;</a></h3>
<ul>
<li>AWS Account with appropriate permissions</li>
<li>Access to Amazon Bedrock AgentCore service</li>
<li>Permissions to create:</li>
<li>ECR repositories</li>
<li>CodeBuild projects</li>
<li>Cognito User Pools</li>
<li>IAM roles and policies</li>
<li>AgentCore Runtime resources</li>
</ul>
<h2 id="quick-start">Quick Start<a class="headerlink" href="#quick-start" title="Permanent link">&para;</a></h2>
<h3 id="1-configure-variables">1. Configure Variables<a class="headerlink" href="#1-configure-variables" title="Permanent link">&para;</a></h3>
<p>Copy the example variables file and customize:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>terraform.tfvars.example<span class="w"> </span>terraform.tfvars
</code></pre></div>
<p>Edit <code>terraform.tfvars</code> with your preferred values.</p>
<h3 id="2-initialize-terraform">2. Initialize Terraform<a class="headerlink" href="#2-initialize-terraform" title="Permanent link">&para;</a></h3>
<p>See <a href="../../../../../https:/raw.githubusercontent.com/awslabs/amazon-bedrock-agentcore-samples/refs/heads/main/04-infrastructure-as-code/terraform/README.md#state-management-options">State Management Options</a> in the main README for detailed guidance on local vs. remote state.</p>
<p><strong>Quick start with local state:</strong>
<div class="highlight"><pre><span></span><code>terraform<span class="w"> </span>init
</code></pre></div></p>
<p><strong>For team collaboration, use remote state</strong> - see the <a href="../../../../../https:/raw.githubusercontent.com/awslabs/amazon-bedrock-agentcore-samples/refs/heads/main/04-infrastructure-as-code/terraform/README.md#state-management-options">main README</a> for setup instructions.</p>
<h3 id="3-review-the-plan">3. Review the Plan<a class="headerlink" href="#3-review-the-plan" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>terraform<span class="w"> </span>plan
</code></pre></div>
<h3 id="4-deploy">4. Deploy<a class="headerlink" href="#4-deploy" title="Permanent link">&para;</a></h3>
<p><strong>Method 1: Using Deploy Script (Recommended)</strong></p>
<p>Make the script executable (first-time only):
<div class="highlight"><pre><span></span><code>chmod<span class="w"> </span>+x<span class="w"> </span>deploy.sh
</code></pre></div></p>
<p>Then deploy:
<div class="highlight"><pre><span></span><code>./deploy.sh
</code></pre></div></p>
<p>The deploy script:
- Validates Terraform configuration
- Shows deployment plan
- Prompts for confirmation
- Applies changes</p>
<p><strong>Method 2: Direct Terraform Commands</strong></p>
<div class="highlight"><pre><span></span><code>terraform<span class="w"> </span>apply
</code></pre></div>
<p>When prompted, type <code>yes</code> to confirm the deployment.</p>
<p><strong>Note</strong>: The deployment process includes:
1. Creating ECR repository
2. Building Docker image via CodeBuild
3. Creating Cognito User Pool and test user
4. Creating AgentCore Runtime with MCP protocol</p>
<p>Total deployment time: <strong>~5-10 minutes</strong></p>
<h3 id="5-get-outputs">5. Get Outputs<a class="headerlink" href="#5-get-outputs" title="Permanent link">&para;</a></h3>
<p>After deployment completes:</p>
<div class="highlight"><pre><span></span><code>terraform<span class="w"> </span>output
</code></pre></div>
<p>Example output:
<div class="highlight"><pre><span></span><code>agent_runtime_id = &quot;AGENT1234567890&quot;
agent_runtime_arn = &quot;arn:aws:bedrock-agentcore:us-west-2:123456789012:agent-runtime/AGENT1234567890&quot;
cognito_user_pool_id = &quot;us-west-2_AbCdEfGhI&quot;
cognito_user_pool_client_id = &quot;1234567890abcdefghijklmno&quot;
cognito_discovery_url = &quot;https://cognito-idp.us-west-2.amazonaws.com/us-west-2_AbCdEfGhI/.well-known/openid-configuration&quot;
test_username = &quot;testuser&quot;
get_token_command = &quot;python get_token.py 1234567890abcdefghijklmno testuser MyPassword123! us-west-2&quot;
</code></pre></div></p>
<h2 id="authentication-model">Authentication Model<a class="headerlink" href="#authentication-model" title="Permanent link">&para;</a></h2>
<p>This pattern uses <strong>Cognito JWT-based authentication</strong>:</p>
<ul>
<li><strong>JWT Tokens</strong>: Cognito User Pool issues JWT tokens for authentication</li>
<li><strong>Custom JWT Authorizer</strong>: Runtime validates JWT tokens against Cognito discovery URL</li>
<li><strong>Test User</strong>: Pre-configured user (testuser/MyPassword123!) for testing</li>
<li><strong>Token Expiry</strong>: JWT tokens expire after 1 hour</li>
<li><strong>Discovery URL</strong>: OpenID Connect discovery endpoint for token validation</li>
</ul>
<p><strong>Authentication Flow:</strong>
1. User authenticates with Cognito User Pool
2. Cognito issues JWT access token
3. Client includes JWT token in MCP request headers
4. Runtime validates token using Cognito's OIDC discovery endpoint
5. Authorized requests processed by MCP server</p>
<p><strong>Note</strong>: This is a backend authentication pattern for MCP tool access. For user-facing applications, integrate with your identity provider or use Cognito hosted UI for end-user authentication.</p>
<h2 id="testing-the-mcp-server">Testing the MCP Server<a class="headerlink" href="#testing-the-mcp-server" title="Permanent link">&para;</a></h2>
<h3 id="prerequisites-for-testing">Prerequisites for Testing<a class="headerlink" href="#prerequisites-for-testing" title="Permanent link">&para;</a></h3>
<p>Before testing, ensure you have the required packages installed:</p>
<p><strong>Option A: Using uv (Recommended)</strong>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>venv
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate<span class="w">  </span><span class="c1"># On Windows: .venv\Scripts\activate</span>
uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>boto3<span class="w"> </span>mcp<span class="w">  </span><span class="c1"># Both required for MCP server testing</span>
</code></pre></div></p>
<p><strong>Option B: System-wide installation</strong>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>boto3<span class="w"> </span>mcp<span class="w">  </span><span class="c1"># Both required for MCP server testing</span>
</code></pre></div></p>
<p><strong>Note</strong>: Both <code>boto3</code> (for AWS API calls) and <code>mcp</code> (for MCP protocol) are required for testing the MCP server.</p>
<h3 id="step-1-get-authentication-token">Step 1: Get Authentication Token<a class="headerlink" href="#step-1-get-authentication-token" title="Permanent link">&para;</a></h3>
<p>First, get a JWT token from Cognito:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Use the command from terraform outputs</span>
terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>get_token_command<span class="w"> </span><span class="p">|</span><span class="w"> </span>bash
</code></pre></div>
<p>Or manually:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Get the Client ID</span>
<span class="nv">CLIENT_ID</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>cognito_user_pool_client_id<span class="k">)</span>
<span class="nv">REGION</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>aws_region<span class="k">)</span>

<span class="c1"># Get authentication token</span>
python<span class="w"> </span>get_token.py<span class="w"> </span><span class="nv">$CLIENT_ID</span><span class="w"> </span>testuser<span class="w"> </span>MyPassword123!<span class="w"> </span><span class="nv">$REGION</span>
</code></pre></div>
<p>This will output a JWT token. Copy the token for the next step.</p>
<h3 id="step-2-test-the-mcp-server">Step 2: Test the MCP Server<a class="headerlink" href="#step-2-test-the-mcp-server" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Get the Runtime ARN</span>
<span class="nv">RUNTIME_ARN</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>agent_runtime_arn<span class="k">)</span>
<span class="nv">REGION</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>aws_region<span class="k">)</span>

<span class="c1"># Test the MCP server (replace YOUR_JWT_TOKEN with the token from step 1)</span>
python<span class="w"> </span>test_mcp_server.py<span class="w"> </span><span class="nv">$RUNTIME_ARN</span><span class="w"> </span>YOUR_JWT_TOKEN<span class="w"> </span><span class="nv">$REGION</span>
</code></pre></div>
<h3 id="expected-output">Expected Output<a class="headerlink" href="#expected-output" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>üîÑ Initializing MCP session...
‚úì MCP session initialized

üîÑ Listing available tools...

üìã Available MCP Tools:
==================================================
üîß add_numbers: Add two numbers together
üîß multiply_numbers: Multiply two numbers together
üîß greet_user: Greet a user by name

üß™ Testing MCP Tools:
==================================================

‚ûï Testing add_numbers(5, 3)...
   Result: 8

‚úñÔ∏è  Testing multiply_numbers(4, 7)...
   Result: 28

üëã Testing greet_user(&#39;Alice&#39;)...
   Result: Hello, Alice! Nice to meet you.

‚úÖ MCP tool testing completed!
</code></pre></div>
<h2 id="sample-tool-invocations">Sample Tool Invocations<a class="headerlink" href="#sample-tool-invocations" title="Permanent link">&para;</a></h2>
<p>Try these MCP tool calls:</p>
<ol>
<li>
<p><strong>Add Numbers</strong>:
   <div class="highlight"><pre><span></span><code><span class="c1"># Tool: add_numbers</span>
<span class="c1"># Parameters: {&quot;a&quot;: 10, &quot;b&quot;: 25}</span>
<span class="c1"># Expected Result: 35</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Multiply Numbers</strong>:
   <div class="highlight"><pre><span></span><code><span class="c1"># Tool: multiply_numbers</span>
<span class="c1"># Parameters: {&quot;a&quot;: 6, &quot;b&quot;: 7}</span>
<span class="c1"># Expected Result: 42</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Greet User</strong>:
   <div class="highlight"><pre><span></span><code><span class="c1"># Tool: greet_user</span>
<span class="c1"># Parameters: {&quot;name&quot;: &quot;John&quot;}</span>
<span class="c1"># Expected Result: &quot;Hello, John! Nice to meet you.&quot;</span>
</code></pre></div></p>
</li>
</ol>
<h2 id="customization">Customization<a class="headerlink" href="#customization" title="Permanent link">&para;</a></h2>
<h3 id="modify-mcp-server-code">Modify MCP Server Code<a class="headerlink" href="#modify-mcp-server-code" title="Permanent link">&para;</a></h3>
<p>Edit files in <code>mcp-server-code/</code> and deploy:</p>
<p><strong>Adding New Tools</strong>:</p>
<p>Edit <code>mcp-server-code/mcp_server.py</code>:
<div class="highlight"><pre><span></span><code><span class="nd">@mcp</span><span class="o">.</span><span class="n">tool</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">subtract_numbers</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Subtract two numbers&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
</code></pre></div></p>
<p><strong>Update Dependencies</strong>:</p>
<p>Edit <code>mcp-server-code/requirements.txt</code>:
<div class="highlight"><pre><span></span><code>mcp&gt;=1.10.0
boto3
bedrock-agentcore
your-new-package&gt;=1.0.0
</code></pre></div></p>
<p>Changes are automatically detected and trigger rebuild. Run <code>terraform apply</code> to deploy.</p>
<h3 id="modify-authentication">Modify Authentication<a class="headerlink" href="#modify-authentication" title="Permanent link">&para;</a></h3>
<p>To change Cognito password policy, edit <code>cognito.tf</code>:
<div class="highlight"><pre><span></span><code><span class="nb">password_policy</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">minimum_length</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="m">12</span>
<span class="w">  </span><span class="na">require_uppercase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="na">require_lowercase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="na">require_numbers</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="na">require_symbols</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="environment-variables">Environment Variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h3>
<p>Add to <code>terraform.tfvars</code>:
<div class="highlight"><pre><span></span><code><span class="nb">environment_variables</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">LOG_LEVEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;DEBUG&quot;</span>
<span class="w">  </span><span class="na">CUSTOM_VAR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;value&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="network-mode">Network Mode<a class="headerlink" href="#network-mode" title="Permanent link">&para;</a></h3>
<p>Set <code>network_mode = "PRIVATE"</code> for VPC deployment (requires additional VPC configuration).</p>
<h2 id="file-structure">File Structure<a class="headerlink" href="#file-structure" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>mcp-server-agentcore-runtime/
‚îú‚îÄ‚îÄ main.tf                      # AgentCore runtime with MCP protocol
‚îú‚îÄ‚îÄ variables.tf                 # Input variables
‚îú‚îÄ‚îÄ outputs.tf                   # Output values (includes Cognito)
‚îú‚îÄ‚îÄ versions.tf                  # Provider configuration
‚îú‚îÄ‚îÄ iam.tf                       # IAM roles and policies
‚îú‚îÄ‚îÄ s3.tf                        # S3 bucket for MCP server source
‚îú‚îÄ‚îÄ ecr.tf                       # ECR repository
‚îú‚îÄ‚îÄ codebuild.tf                 # Docker build automation
‚îú‚îÄ‚îÄ cognito.tf                   # Cognito User Pool &amp; Client
‚îú‚îÄ‚îÄ buildspec.yml                # CodeBuild build specification
‚îú‚îÄ‚îÄ terraform.tfvars.example     # Example configuration
‚îú‚îÄ‚îÄ backend.tf.example           # Remote state example
‚îú‚îÄ‚îÄ mcp-server-code/             # MCP server source code
‚îÇ   ‚îú‚îÄ‚îÄ mcp_server.py           # MCP server with 3 tools
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile              # Container configuration
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt        # Python dependencies
‚îú‚îÄ‚îÄ scripts/                     # Build automation scripts
‚îÇ   ‚îî‚îÄ‚îÄ build-image.sh          # CodeBuild trigger &amp; verification
‚îú‚îÄ‚îÄ get_token.py                 # Cognito JWT token retrieval
‚îú‚îÄ‚îÄ test_mcp_server.py           # MCP server testing script
‚îú‚îÄ‚îÄ deploy.sh                    # Deployment helper script
‚îú‚îÄ‚îÄ destroy.sh                   # Cleanup helper script
‚îú‚îÄ‚îÄ architecture.png             # Architecture diagram
‚îú‚îÄ‚îÄ .gitignore                   # Git ignore patterns
‚îî‚îÄ‚îÄ README.md                    # This file
</code></pre></div>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="codebuild-fails">CodeBuild Fails<a class="headerlink" href="#codebuild-fails" title="Permanent link">&para;</a></h3>
<p>If the Docker build fails:</p>
<ol>
<li>
<p>Check CodeBuild logs:
   <div class="highlight"><pre><span></span><code><span class="nv">PROJECT_NAME</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>codebuild_project_name<span class="k">)</span>
aws<span class="w"> </span>codebuild<span class="w"> </span>batch-get-builds<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ids<span class="w"> </span><span class="nv">$PROJECT_NAME</span>
</code></pre></div></p>
</li>
<li>
<p>Common issues:</p>
</li>
<li>Network connectivity issues</li>
<li>ECR authentication problems</li>
<li>Python dependency conflicts in requirements.txt</li>
</ol>
<h3 id="runtime-creation-fails">Runtime Creation Fails<a class="headerlink" href="#runtime-creation-fails" title="Permanent link">&para;</a></h3>
<p>If the runtime creation fails:</p>
<ol>
<li>
<p>Verify the Docker image exists:
   <div class="highlight"><pre><span></span><code><span class="nv">REPO_NAME</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>ecr_repository_url<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;/&#39;</span><span class="w"> </span>-f2<span class="k">)</span>
aws<span class="w"> </span>ecr<span class="w"> </span>describe-images<span class="w"> </span>--repository-name<span class="w"> </span><span class="nv">$REPO_NAME</span>
</code></pre></div></p>
</li>
<li>
<p>Check IAM role permissions</p>
</li>
<li>Verify Bedrock AgentCore service quotas</li>
<li>Ensure MCP protocol is properly configured</li>
</ol>
<h3 id="authentication-issues">Authentication Issues<a class="headerlink" href="#authentication-issues" title="Permanent link">&para;</a></h3>
<p>If JWT authentication fails:</p>
<ol>
<li>
<p>Verify Cognito user exists:
   <div class="highlight"><pre><span></span><code><span class="nv">USER_POOL_ID</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>cognito_user_pool_id<span class="k">)</span>
aws<span class="w"> </span>cognito-idp<span class="w"> </span>admin-get-user<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--user-pool-id<span class="w"> </span><span class="nv">$USER_POOL_ID</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--username<span class="w"> </span>testuser
</code></pre></div></p>
</li>
<li>
<p>Check token expiration (tokens expire after 1 hour)</p>
</li>
<li>Verify the discovery URL is accessible</li>
<li>Ensure allowed_clients matches the client ID</li>
</ol>
<h3 id="mcp-server-connection-fails">MCP Server Connection Fails<a class="headerlink" href="#mcp-server-connection-fails" title="Permanent link">&para;</a></h3>
<p>If MCP tool invocations fail:</p>
<ol>
<li>Check runtime status in AWS Console</li>
<li>Review CloudWatch Logs for the runtime</li>
<li>Verify JWT token is valid and not expired</li>
<li>Check that MCP protocol is configured correctly</li>
<li>Ensure the runtime is in ACTIVE state</li>
</ol>
<h2 id="cleanup">Cleanup<a class="headerlink" href="#cleanup" title="Permanent link">&para;</a></h2>
<h3 id="destroy-all-resources">Destroy All Resources<a class="headerlink" href="#destroy-all-resources" title="Permanent link">&para;</a></h3>
<p>Make the script executable (first-time only):
<div class="highlight"><pre><span></span><code>chmod<span class="w"> </span>+x<span class="w"> </span>destroy.sh
</code></pre></div></p>
<p>Then cleanup:
<div class="highlight"><pre><span></span><code>./destroy.sh
</code></pre></div></p>
<p>Or use Terraform directly:</p>
<div class="highlight"><pre><span></span><code>terraform<span class="w"> </span>destroy
</code></pre></div>
<p><strong>Note</strong>: This will delete:
- AgentCore Runtime
- ECR Repository (and all images)
- Cognito User Pool (and all users)
- S3 Bucket (and all source code archives)
- All IAM roles and policies</p>
<h3 id="verify-cleanup">Verify Cleanup<a class="headerlink" href="#verify-cleanup" title="Permanent link">&para;</a></h3>
<p>Confirm all resources are deleted:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Check AgentCore runtimes</span>
aws<span class="w"> </span>bedrock-agentcore<span class="w"> </span>list-agent-runtimes

<span class="c1"># Check ECR repositories</span>
aws<span class="w"> </span>ecr<span class="w"> </span>describe-repositories<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>mcp-server

<span class="c1"># Check Cognito User Pools</span>
aws<span class="w"> </span>cognito-idp<span class="w"> </span>list-user-pools<span class="w"> </span>--max-results<span class="w"> </span><span class="m">10</span>
</code></pre></div>
<h2 id="pricing">Pricing<a class="headerlink" href="#pricing" title="Permanent link">&para;</a></h2>
<p>For current pricing information, please refer to:
- <a href="https://aws.amazon.com/bedrock/pricing/">Amazon Bedrock Pricing</a>
- <a href="https://aws.amazon.com/ecr/pricing/">Amazon ECR Pricing</a>
- <a href="https://aws.amazon.com/codebuild/pricing/">AWS CodeBuild Pricing</a>
- <a href="https://aws.amazon.com/cognito/pricing/">Amazon Cognito Pricing</a>
- <a href="https://aws.amazon.com/s3/pricing/">Amazon S3 Pricing</a>
- <a href="https://aws.amazon.com/cloudwatch/pricing/">Amazon CloudWatch Pricing</a>
- <a href="https://aws.amazon.com/lambda/pricing/">AWS Lambda Pricing</a></p>
<p><strong>Note</strong>: Actual costs depend on your usage patterns, AWS region, and specific services consumed.</p>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<h3 id="explore-more-patterns">Explore More Patterns<a class="headerlink" href="#explore-more-patterns" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="../../../../../https:/raw.githubusercontent.com/awslabs/amazon-bedrock-agentcore-samples/refs/heads/main/04-infrastructure-as-code/terraform/basic-runtime/">Basic Runtime</a> - Simpler deployment without MCP protocol</li>
<li><a href="../../../../../https:/raw.githubusercontent.com/awslabs/amazon-bedrock-agentcore-samples/refs/heads/main/04-infrastructure-as-code/terraform/multi-agent-runtime/">Multi-Agent Runtime</a> - Deploy multiple coordinating agents</li>
<li><a href="../../../../../https:/raw.githubusercontent.com/awslabs/amazon-bedrock-agentcore-samples/refs/heads/main/04-infrastructure-as-code/terraform/end-to-end-weather-agent/">End-to-End Weather Agent</a> - Full-featured agent with tools</li>
</ul>
<h3 id="extend-this-pattern">Extend This Pattern<a class="headerlink" href="#extend-this-pattern" title="Permanent link">&para;</a></h3>
<ul>
<li>Add more MCP tools to <code>mcp-server-code/mcp_server.py</code></li>
<li>Integrate with external APIs</li>
<li>Add persistent storage (DynamoDB, S3)</li>
<li>Implement custom authentication logic</li>
<li>Add monitoring and alerting</li>
<li>Deploy to VPC for private networking</li>
</ul>
<h3 id="learn-more-about-mcp">Learn More About MCP<a class="headerlink" href="#learn-more-about-mcp" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://modelcontextprotocol.io/specification/">Model Context Protocol Specification</a></li>
<li><a href="https://github.com/modelcontextprotocol/python-sdk">MCP Python SDK</a></li>
<li><a href="https://modelcontextprotocol.io/docs/building-mcp-servers">Building MCP Servers</a></li>
</ul>
<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs">Terraform AWS Provider Documentation</a></li>
<li><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/agentcore.html">AWS Bedrock AgentCore Documentation</a></li>
<li><a href="https://modelcontextprotocol.io/">Model Context Protocol (MCP)</a></li>
<li><a href="https://docs.aws.amazon.com/cognito/">Amazon Cognito Documentation</a></li>
<li><a href="https://github.com/aws-samples/amazon-bedrock-agentcore-samples">AgentCore Samples Repository</a></li>
</ul>
<h2 id="contributing">ü§ù Contributing<a class="headerlink" href="#contributing" title="Permanent link">&para;</a></h2>
<p>We welcome contributions! Please see our <a href="../../../../../https:/raw.githubusercontent.com/awslabs/amazon-bedrock-agentcore-samples/refs/heads/main/CONTRIBUTING.md">Contributing Guide</a> for details.</p>
<h2 id="license">üìÑ License<a class="headerlink" href="#license" title="Permanent link">&para;</a></h2>
<p>This project is licensed under the MIT License - see the <a href="../../../../../https:/raw.githubusercontent.com/awslabs/amazon-bedrock-agentcore-samples/refs/heads/main/LICENSE">LICENSE</a> file for details.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": ["content.code.copy", "content.code.select", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top", "search.highlight", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../../assets/external/unpkg.com/mermaid@11/dist/mermaid.min.js"></script>
      
    
  </body>
</html>