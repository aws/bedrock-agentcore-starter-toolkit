from google.adk.tools.mcp_tool.mcp_toolset import MCPToolset
from google.adk.tools.mcp_tool.mcp_session_manager import StreamableHTTPConnectionParams
import os

def get_auth():
    raise NotImplementedError()

def get_streamable_http_mcp_client() -> MCPToolset:
    gateway_url = os.getenv("gatewayUrl")
    if not gateway_url:
        raise RuntimeError("Missing required environment variable: gatewayUrl")
    return MCPToolset(
        connection_params=StreamableHTTPConnectionParams(
            url=f"{gateway_url}/mcp",
            headers={
                "Authorization": f"Bearer {get_auth()}"
            }
        )
    )