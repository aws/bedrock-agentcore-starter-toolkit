import os
from agents.mcp import MCPServerStreamableHttp

def get_auth():
    raise NotImplementedError()

def get_streamable_http_mcp_client() -> MCPServerStreamableHttp:
    gateway_url = os.getenv("gatewayUrl")
    if not gateway_url:
        raise RuntimeError("Missing required environment variable: gatewayUrl")
    return MCPServerStreamableHttp(
        name="AgentCore Gateway MCP",
        params={
            "url": f"{gateway_url}/mcp",
            "headers": {
                "Authorization": f"Bearer {get_auth}"
            }
        }
    )